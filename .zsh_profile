# zsh plugins
source ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh

plugins=(zsh-autosuggestions)

# config {

prompt_context () {
    prompt_segment black default "[$USER@$HOST]"
}

# }

# alias{
alias ll="ls -la"
alias vi=vim
alias emacs="emacs -nw"

alias -s gz='tar -xzvf'
alias -s tgz='tar -xzvf'
alias -s zip='unzip'
alias -s bz2='tar -xjvf'

alias clone='git clone --depth=1'
alias gpc='git push $1 $(current_branch)'

# }

# Software {
alias subl=/opt/sublime_text/sublime_text %F
alias mweb="/Applications/MWeb.app/Contents/MacOS/MWeb"

alias code=/usr/share/code/code --new-window-if-not-first %U

function cdf() {
    target=`osascript -e 'tell application "Finder" to if (count of Finder windows) > 0 then get POSIX path of (target of front Finder window as text)'`
    if [ "$target" != "" ]; then
        cd "$target"; pwd
    else
        echo 'No Finder window found' >&2
    fi
}

function destroy() {
   current=`pwd`
   echo "delete $current..."
   cd ..
   /bin/rm -rf $current
}

function update () {
	git add . && git commit -am "`curl -s https://whatthecommit.com/index.txt `" && git push origin $(git_current_branch)
}

# }

# functions
alias serve=serve-laravel
alias homestead='function __homestead() { (cd ~/.composer/vendor/laravel/homestead && vagrant $*); unset -f __homestead; }; __homestead'
alias centos='function __centos() { (cd ~/code/vagrant/centos && vagrant $*); unset -f __centos; }; __centos'
alias clone='git clone --depth=1'

# homestead
function serve-laravel() {
    if [[ "$1" && "$2" ]]
    then
		sudo bash /home/work/code/scripts/nginx-conf/serve-laravel.sh "$1" "$2" 80
    else
        echo "Error: missing required parameters."
        echo "Usage: "
        echo "  serve domain path"
    fi
}

# config files
alias hosts="subl /etc/hosts"
alias phpini="subl /usr/local/etc/php/5.6/php.ini"
alias pac="subl ~/code/php/www/vps.pac"

alias ip="ifconfig | grep 'inet ' | uniq"

# docker
function drm() {
    docker ps -a | grep 'Exited' | awk '{print $1}' | xargs docker rm
}
function drmi() {
    docker images | grep '<none>' | awk '{print $3}' | xargs docker rmi
}

function dip() {
	docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' $1
}

# Java
export JAVA_HOME=/usr/lib/jvm/default-java
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar

export FLUME_HOME=/usr/local/flume
export HADOOP_HOME=/usr/local/hadoop

# Golang
export GOPATH=$HOME/code/go
export GOBIN=$GOPATH/bin/$GOVERSION
export GO111MODULE=on

# NodeJS
export NODE_PATH="/usr/local/lib/node_modules"
export EDITOR="/usr/local/bin/vim"

# pyenv
export PYENV_ROOT="$HOME/.pyenv"

export COMPOSER_ROOT="$HOME/.config/composer"

export PATH=$GOBIN:$GOROOT/bin:$HOME/.cargo/bin:/home/linuxbrew/.linuxbrew/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PYENV_ROOT/shims:$PYENV_ROOT/bin:$COMPOSER_ROOT/vendor/bin:$PATH:$JAVA_HOME/bin:$GOPATH/bin:$HADOOP_HOME/bin:$FLUME_HOME/bin

# include libs
export PHP_ZLIB_DIR="/usr/local/opt/zlib"


# Highlight linux man page
export LESS_TERMCAP_mb=$'\E[01;31m'
export LESS_TERMCAP_md=$'\E[01;31m'
export LESS_TERMCAP_me=$'\E[0m'
export LESS_TERMCAP_se=$'\E[0m'
export LESS_TERMCAP_so=$'\E[01;44;33m'
export LESS_TERMCAP_ue=$'\E[0m'
export LESS_TERMCAP_us=$'\E[01;32m'

source $HOME/.zsh/.zsh_local
